<svg viewBox="0 0 800 600" xmlns="http://www.w3.org/2000/svg">
  <!-- Background -->
  <rect width="800" height="600" fill="#f8f9fa"/>
  
  <!-- Main Mental Loop -->
  <g stroke="#2563eb" stroke-width="2" fill="none">
    <ellipse cx="400" cy="300" rx="280" ry="200" stroke-dasharray="10,5" opacity="0.3"/>
  </g>
  <text x="400" y="60" text-anchor="middle" font-size="14" font-weight="bold" fill="#2563eb">Prediction-Driven Mental Loop</text>
  
  <!-- Mental Context (current brain state) -->
  <rect x="50" y="140" width="130" height="70" rx="5" fill="#faf5ff" stroke="#8b5cf6"/>
  <text x="115" y="165" text-anchor="middle" font-size="12" font-weight="bold">Mental Context</text>
  <text x="115" y="180" text-anchor="middle" font-size="10">Current brain state</text>
  <text x="115" y="192" text-anchor="middle" font-size="10">Active patterns</text>
  
  <!-- Prediction Generation -->
  <rect x="220" y="120" width="140" height="110" rx="5" fill="#fef3c7" stroke="#f59e0b"/>
  <text x="290" y="145" text-anchor="middle" font-size="12" font-weight="bold">Prediction</text>
  <text x="290" y="157" text-anchor="middle" font-size="12" font-weight="bold">Generation</text>
  
  <!-- High-res attention area -->
  <rect x="230" y="170" width="60" height="25" rx="3" fill="#fbbf24" stroke="#f59e0b"/>
  <text x="260" y="185" text-anchor="middle" font-size="9">High-res</text>
  
  <!-- Low-res background -->
  <rect x="300" y="170" width="50" height="25" rx="3" fill="#fde68a" stroke="#f59e0b"/>
  <text x="325" y="185" text-anchor="middle" font-size="9">Low-res</text>
  
  <text x="290" y="210" text-anchor="middle" font-size="10">Attention = High-res scope</text>
  <text x="290" y="222" text-anchor="middle" font-size="10">Background monitoring</text>
  
  <!-- World Model Graph -->
  <rect x="460" y="140" width="150" height="100" rx="5" fill="#f0fdf4" stroke="#10b981"/>
  <text x="535" y="165" text-anchor="middle" font-size="12" font-weight="bold">World Model</text>
  <text x="535" y="177" text-anchor="middle" font-size="10">(Experience Graph)</text>
  
  <!-- Graph nodes with prediction-reality pairs -->
  <g stroke="#10b981" stroke-width="1">
    <circle cx="480" cy="195" r="4" fill="#10b981"/>
    <circle cx="500" cy="200" r="4" fill="#10b981"/>
    <circle cx="520" cy="190" r="4" fill="#10b981"/>
    <circle cx="550" cy="205" r="4" fill="#10b981"/>
    <circle cx="570" cy="195" r="4" fill="#10b981"/>
    <!-- Connections -->
    <line x1="480" y1="195" x2="500" y2="200"/>
    <line x1="500" y1="200" x2="520" y2="190"/>
    <line x1="520" y1="190" x2="550" y2="205"/>
    <line x1="550" y1="205" x2="570" y2="195"/>
    <line x1="480" y1="195" x2="520" y2="190"/>
    <!-- Prediction-reality indicators -->
    <circle cx="477" cy="192" r="1.5" fill="#ef4444"/>
    <circle cx="483" cy="198" r="1.5" fill="#22c55e"/>
  </g>
  <text x="535" y="225" text-anchor="middle" font-size="9">Prediction-Reality pairs</text>
  
  <!-- Prediction Packet -->
  <rect x="400" y="260" width="120" height="80" rx="5" fill="#ddd6fe" stroke="#7c3aed"/>
  <text x="460" y="280" text-anchor="middle" font-size="12" font-weight="bold">Prediction</text>
  <text x="460" y="292" text-anchor="middle" font-size="12" font-weight="bold">Packet</text>
  <text x="460" y="310" text-anchor="middle" font-size="10">Expected sensory</text>
  <text x="460" y="322" text-anchor="middle" font-size="10">+ Motor action</text>
  <text x="460" y="334" text-anchor="middle" font-size="10">(Pending validation)</text>
  
  <!-- Reality Check -->
  <rect x="550" y="350" width="120" height="60" rx="5" fill="#fdf2f8" stroke="#ec4899"/>
  <text x="610" y="375" text-anchor="middle" font-size="12" font-weight="bold">Reality Check</text>
  <text x="610" y="390" text-anchor="middle" font-size="10">Compare prediction</text>
  <text x="610" y="402" text-anchor="middle" font-size="10">vs actual sensory</text>
  
  <!-- Actual Sensory Input -->
  <rect x="680" y="240" width="100" height="60" rx="5" fill="#e5f3ff" stroke="#2563eb"/>
  <text x="730" y="265" text-anchor="middle" font-size="12" font-weight="bold">Actual</text>
  <text x="730" y="277" text-anchor="middle" font-size="12" font-weight="bold">Sensory</text>
  <text x="730" y="292" text-anchor="middle" font-size="10">From brainstem</text>
  
  <!-- Genome (Steady State) -->
  <rect x="50" y="350" width="120" height="100" rx="5" fill="#faf5ff" stroke="#8b5cf6"/>
  <text x="110" y="375" text-anchor="middle" font-size="12" font-weight="bold">Genome</text>
  <text x="110" y="390" text-anchor="middle" font-size="10">Drives + Global</text>
  <text x="110" y="402" text-anchor="middle" font-size="10">Assumptions:</text>
  <text x="110" y="414" text-anchor="middle" font-size="9">• Physics constants</text>
  <text x="110" y="426" text-anchor="middle" font-size="9">• Body configuration</text>
  <text x="110" y="438" text-anchor="middle" font-size="9">• Basic drives</text>
  
  <!-- Memory Consolidation -->
  <rect x="250" y="380" width="140" height="70" rx="5" fill="#fff7ed" stroke="#ea580c"/>
  <text x="320" y="405" text-anchor="middle" font-size="12" font-weight="bold">Memory</text>
  <text x="320" y="417" text-anchor="middle" font-size="12" font-weight="bold">Consolidation</text>
  <text x="320" y="435" text-anchor="middle" font-size="10">Merge similar predictions</text>
  <text x="320" y="447" text-anchor="middle" font-size="10">Strengthen accurate ones</text>
  
  <!-- Motor Commands to Brainstem -->
  <rect x="280" y="260" width="100" height="50" rx="5" fill="#dcfce7" stroke="#16a34a"/>
  <text x="330" y="280" text-anchor="middle" font-size="12" font-weight="bold">Motor</text>
  <text x="330" y="292" text-anchor="middle" font-size="12" font-weight="bold">Commands</text>
  <text x="330" y="305" text-anchor="middle" font-size="10">To brainstem</text>
  
  <!-- Arrows showing data flow -->
  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="10" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#374151"/>
    </marker>
  </defs>
  
  <!-- Main flow arrows -->
  <g stroke="#374151" stroke-width="2" fill="none" marker-end="url(#arrowhead)">
    <!-- Mental Context to Prediction Generation -->
    <line x1="180" y1="175" x2="210" y2="175"/>
    
    <!-- World Model to Prediction Generation -->
    <line x1="460" y1="190" x2="360" y2="175"/>
    
    <!-- Prediction Generation to Prediction Packet -->
    <line x1="320" y1="230" x2="430" y2="260"/>
    
    <!-- Prediction Generation to Motor Commands -->
    <line x1="290" y1="230" x2="320" y2="250"/>
    
    <!-- Prediction Packet to Reality Check -->
    <line x1="520" y1="300" x2="560" y2="350"/>
    
    <!-- Actual Sensory to Reality Check -->
    <line x1="680" y1="290" x2="650" y2="360"/>
    
    <!-- Reality Check back to World Model -->
    <line x1="580" y1="350" x2="550" y2="240"/>
    
    <!-- World Model back to Mental Context (completing loop) -->
    <path d="M 460 170 Q 400 100 200 100 Q 100 100 100 130" stroke-dasharray="5,3"/>
    
    <!-- Genome to Mental Context -->
    <line x1="115" y1="350" x2="115" y2="220"/>
    
    <!-- Memory consolidation connection -->
    <line x1="320" y1="380" x2="480" y2="240"/>
  </g>
  
  <!-- Labels for key processes -->
  <text x="195" y="165" text-anchor="middle" font-size="9" fill="#374151">Current state</text>
  <text x="385" y="200" text-anchor="middle" font-size="9" fill="#374151">Predictions</text>
  <text x="375" y="245" text-anchor="middle" font-size="9" fill="#374151">Actions</text>
  <text x="590" y="320" text-anchor="middle" font-size="9" fill="#374151">Compare</text>
  <text x="520" y="260" text-anchor="middle" font-size="9" fill="#374151">Validate</text>
  <text x="300" y="85" text-anchor="middle" font-size="9" fill="#374151">Continuous prediction → action → validation</text>
  
  <!-- Processing types -->
  <text x="50" y="550" font-size="12" font-weight="bold" fill="#374151">Key Insight:</text>
  <text x="50" y="565" font-size="10" fill="#374151">Brain constantly generates predictions, then tests them against reality</text>
  <text x="50" y="577" font-size="10" fill="#374151">Attention = high-resolution prediction scope</text>
  <text x="50" y="589" font-size="10" fill="#374151">Learning = prediction error correction</text>
</svg>